<head>
  <title>MileauxBlog</title>
  <meta name="viewport" content="width=device-width, user-scalable=no">
 </head>
<body> 
  {{>main}}
</body>
  
<template name = "main">
<div class = "container-fluid">
{{>headerbar}}
<hr id = "top">
{{>posts}}

{{#if currentUser}}
{{>insertPost}}
{{/if}}

{{>footer}}

</div>
</template>

<template name = "headerbar">
<div class = "row">
<div class = "col-md-4 col-md-offset-4 text-center">
<h1>Mileaux<span class = "text-success">Blog</span></h1>
    {{> loginButtons}}
    </div>
</div>
</template>

<template name = "posts">
{{#each posts}}

{{>post}}

{{/each}}

</template>

<template name = "insertPost">
<h3>{{postFunction}} Post:</h3>
<div class="form-group">
    <label for="postTitle">Post Title</label>
    <input type="text" class="form-control" id="postTitle" placeholder="Enter the title of the new post." value = "{{currentTitle}}">
  </div>
<div class="form-group">
    <label for="postText">Post Text</label>
    <textarea class="form-control" id="postText" placeholder="Enter the new post here" rows = "5">{{currentPostText}}</textarea>
  </div>
<div class = "form-group">
<label for="isPrivate">Show post without logging in?</label>
<input type="checkbox" checked id = "isPrivate" >
</div>
<button class = "btn btn-primary" id = "submitPost">Submit Post</button>

</template>

<template name = "post">
<div class = "row">
<div class = "col-md-8 col-md-offset-2">
<h3 class = "text-center">{{title}}</h3>
<span class = "text-left">Posted {{postTime}} by {{author}}</span>

{{#if canView}}
<div class = "post">
{{postText}}
</div>
{{/if}}
{{#unless canView}}

{{>logInToView}}
{{/unless}}
    
    {{#if isAuthor}}
    {{>postButtons}}
    {{/if}} 
   
<hr id = "top">
</div>
</div>
</template>

<template name = "logInToView">
<div class = "bg-warning">
<h4 class = "text-center">You must log in to see this post.</h4>
</div>
</template>

<template name = "postButtons">

<button class = "btn btn-success editPost">Edit</button>
<button class = "btn btn-danger deletePost">Delete</button>
 
</template>

<template name = "footer">

</template>